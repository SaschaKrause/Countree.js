/*! Countree - v0.0.1 - 2013-02-03
* https://github.com/SaschaKrause/Countree
* Copyright (c) 2013 Sascha Krause; Licensed MIT */
(function(e){function t(e){function a(e,n,i){f(i,e);var s=function(){t.options.direction===r.DOWN?o=i-((new Date).getTime()-n.getTime()):t.options.direction===r.UP&&(o=(new Date).getTime()-n.getTime()),t.countResult.update(o),e(t.countResult),c(o,l(),e)};return setInterval(s,t.options.updateIntervalInMilliseconds)}function f(e,n){t.options.direction===r.DOWN?t.countResult.update(e):t.options.direction===r.UP&&t.countResult.update(0),n(t.countResult)}function l(){return t.options.milliseconds+t.options.seconds*1e3+t.options.minutes*6e4+t.options.hours*36e5+t.options.days*864e5}function c(e,n,i){t.options.direction===r.UP?e>=n&&h():t.options.direction===r.DOWN&&e<=0&&(t.countResult.update(0),h())}function h(){clearInterval(s)}function p(e){u=e,s&&clearInterval(s),s=a(u,new Date,l()),t.isCounting=!0}function d(){h(),t.isCounting=!1}function v(){!t.isCounting&&u&&(s=a(u,new Date,o),t.isCounting=!0)}var t=this,r={DOWN:"down",UP:"up"},s,o=0,u;this.version="0.0.1",this.options={milliseconds:0,seconds:0,minutes:0,hours:0,days:0,updateIntervalInMilliseconds:1e3,direction:r.UP},this.countResult=new n,this.isCounting=!1,i(this.options,e),this.start=p,this.suspend=d,this.resume=v}function n(){this.overallMillisecondsLeft=0,this.timeObject=new r,this.update=function(e){return this.overallMillisecondsLeft=e,this.overallMillisecondsLeft},this.getAsTimeObject=function(){return this.timeObject.update(this.overallMillisecondsLeft)}}function r(){this.milliseconds=0,this.seconds=0,this.minutes=0,this.hours=0,this.days=0,this.update=function(e){if(e>0){var t=e;this.milliseconds=parseInt(e.toString().substr(-3),10),t=Math.floor(t/1e3),this.seconds=t%60,t=Math.floor(t/60),this.minutes=t%60,t=Math.floor(t/60),this.hours=t%24,t=Math.floor(t/24),this.days=t}return this},this.toString=function(){return this.days+" days,  "+this.hours+":"+this.minutes+":"+this.seconds+":"+this.milliseconds}}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}e.Countree=t,e.CountResult=n,e.TimeObject=r})(typeof exports=="object"&&exports||this);