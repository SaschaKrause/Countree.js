<!DOCTYPE html>
<html>
<head>
    <title>countree test</title>
    <meta charset="UTF-8">

</head>
<body>


<div id="counter" style="font-size: 20pt">--</div>
<input type="button" onclick="restart()" value="(re)start">
<input type="button" onclick="suspend()" value="suspend">
<input type="button" onclick="resume()" value="resume">


<script type="text/javascript" src="../Countree.js"></script>
<script type="text/javascript">

    (function () {

        var counterOption = {
            direction: 'up',
            minutes: 0,
            seconds: 40,
            hours: 0,
            days: 0,
            updateIntervalInMilliseconds: 50,
            name: 'my first counter'
        };

        var counter = new Countree(counterOption);

        window.restart = function () {
            counter.start(onCountInterval);
        };

        window.suspend = function () {
            counter.suspend();
        };

        window.resume = function () {
            counter.resume();
        };

        function onCountInterval(countResult) {
            var pTime = countResult.getPassedTime();
            var d = pTime.getDigitForTimeUnitLeftFilled(TIME_UNIT.DAYS, 2);
            var h = pTime.getDigitForTimeUnitLeftFilled(TIME_UNIT.HOURS, 2);
            var m = pTime.getDigitForTimeUnitLeftFilled(TIME_UNIT.MINUTES, 2);
            var s = pTime.getDigitForTimeUnitLeftFilled(TIME_UNIT.SECONDS, 2);
            var ms = pTime.getDigitForTimeUnitLeftFilled(TIME_UNIT.MILLISECONDS, 4);
            var pastTimeFormatted = 'This Countree is up for ' + d + " days,  " + h + ' hours,' + m + ' minutes, ' + s + ' seconds and ' + ms + ' milliseconds.';
            var time = countResult.getAsTimeObject();
            var ildTime = time.days + " days,  "
                    + time.getHoursAsDoubleDigitString() + ":" + time.getMinutesAsDoubleDigitString()
                    + ":" + time.getSecondsAsDoubleDigitString() + ":" + time.getMillisecondsAsTripleDigitString();

            window.document.getElementById('counter').innerHTML = pastTimeFormatted
              + '<br />'
                    + ildTime + '<br />'
              + 'TimeMeasurement.toString(): ' + pTime;
        }


        counter.notifyAt({seconds: 10, when: 'beforeEnd'}, function (countreeReference, milliseconds) {
            console.log("just 10 seconds left @", countreeReference.options.name, "", milliseconds);
        });

        counter.notifyAt({seconds: 10, when: 'afterStart'}, function (countreeReference, milliseconds) {
            console.log("the first 10 seconds are already over @", countreeReference.options.name, "", milliseconds);
        });

        counter.notifyAt({event: 'onStart'}, function (countreeReference, milliseconds) {
            console.log("counter started", countreeReference.options.name, milliseconds);
        });

        counter.notifyAt({event: 'onFinish'}, function (countreeReference, milliseconds) {
            console.log("counter finished", countreeReference.options.name, milliseconds);
        });

        counter.notifyAt({event: 'onSuspend'}, function (countreeReference, milliseconds) {
            console.log("counter suspended", countreeReference.options.name, milliseconds);
        });

        counter.notifyAt({event: 'onResume'}, function (countreeReference, milliseconds) {
            console.log("counter resumed", countreeReference.options.name, milliseconds);
        });

    })();
</script>

</body>
</html>